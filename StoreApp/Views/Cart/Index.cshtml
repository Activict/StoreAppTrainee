@model List<StoreApp.Models.Store.ProductViewModel>

@{
    ViewBag.Title = "Cart";
    decimal totalPrice = 0m;
    int totalItems = 0;
}

<h3>Cart</h3>

@if (TempData["Message"] != null)
{
    <span class="badge badge-success">@TempData["Message"]</span>
}

<table class="table">
    <tr>
        <th>
            Name
        </th>
        <th>
            Price
        </th>
        <th>
            Quantity
        </th>
        <th>
            Unit
        </th>
        <th>
            Picture
        </th>
        <th>
            Quality
        </th>
        <th>
            Enable
        </th>
        <th>
            Category
        </th>
        <th>
            Brand
        </th>
        <th>
            Producer
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        totalPrice += item.Price * item.Quantity;
        totalItems += item.Quantity;
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                $ @Html.DisplayFor(modelItem => item.Price)
            </td>
            <td>
                @Html.ActionLink("-", "DecreaseProduct", new { id = item.Id })
                @Html.DisplayFor(modelItem => item.Quantity)
                @Html.ActionLink("+", "IncreaseProduct", new { id = item.Id })
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Unit)
            </td>
            <td>
                <a href="/Store/DetailsProduct/@item.Id">
                    @if (item.Picture == null)
                    {
                        <img src="~/Pictures/preview_no_image.png" />
                    }
                    else
                    {
                        <img src="/Pictures/Products/@item.Id/preview_@item.Picture" />
                    }
                </a>
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Quality)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Enable)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Category)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Brand)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Producer)
            </td>
            <td>
                @Html.ActionLink("Delete", "DeleteFromCart", new { id = item.Id })
            </td>
        </tr>
    }
    <tr>
        <td>
            <b>Total price:</b>
        </td>
        <td>
            $ <b>@totalPrice</b>
        </td>
        <td>
            of @totalItems item(s)
        </td>
        <td> </td>
        <td> </td>
        <td> </td>
        <td> </td>
        <td> </td>
        <td> </td>
        <td> </td>
        <td>
            @Html.ActionLink("Order", "Order", "Cart", null, new { @class = "btn btn-success"})
        </td>
    </tr>

</table>
